<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Intro to Regular Expressions - Data reporting @ Cronkite</title> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css"> <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.5.0 --> <title>Intro to Regular Expressions | Data reporting @ Cronkite</title> <meta name="generator" content="Jekyll v3.7.4" /> <meta property="og:title" content="Intro to Regular Expressions" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="A collection of materials used in the data reporting class at ASU’s Cronkite School of Journalism" /> <meta property="og:description" content="A collection of materials used in the data reporting class at ASU’s Cronkite School of Journalism" /> <link rel="canonical" href="http://localhost:4000/special/regex-beginning.html" /> <meta property="og:url" content="http://localhost:4000/special/regex-beginning.html" /> <meta property="og:site_name" content="Data reporting @ Cronkite" /> <script type="application/ld+json"> {"url":"http://localhost:4000/special/regex-beginning.html","headline":"Intro to Regular Expressions","description":"A collection of materials used in the data reporting class at ASU’s Cronkite School of Journalism","@type":"WebPage","@context":"http://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000" class="site-title lh-tight">Data reporting @ Cronkite</a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="http://localhost:4000/" class="navigation-list-link">Home</a></li><li class="navigation-list-item"><a href="http://localhost:4000/general" class="navigation-list-link">General topics</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/general/01-resources.html" class="navigation-list-link">Resources</a></li><li class="navigation-list-item "><a href="http://localhost:4000/general/02-sourcing.html" class="navigation-list-link">Data sources and sourcing</a></li><li class="navigation-list-item "><a href="http://localhost:4000/general/03-newsroom-math.html" class="navigation-list-link">Newsroom math</a></li><li class="navigation-list-item "><a href="http://localhost:4000/general/05-file-formats.html" class="navigation-list-link">File formats</a></li><li class="navigation-list-item "><a href="http://localhost:4000/general/06-programming-concepts.html" class="navigation-list-link">Intro to coding</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/excel" class="navigation-list-link">Excel</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/excel/xlguides" class="navigation-list-link">Excel guides</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="http://localhost:4000/excel/xlguides/xl-refresher.html" class="navigation-list-link">Excel refresher</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/xlguides/xl-tidydata.html" class="navigation-list-link">Data types / tidy data</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/xlguides/xl-filtersort.html" class="navigation-list-link">Filter and sort</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/xlguides/xl-formulas.html" class="navigation-list-link">Excel formulas</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/xlguides/xl-pivot.html" class="navigation-list-link">Grouping with pivot tables</a> </li></ul></li><li class="navigation-list-item "><a href="http://localhost:4000/excel/xlpractice" class="navigation-list-link">Excel practice</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="http://localhost:4000/excel/practice/01-excel-azpop-exercise.html" class="navigation-list-link">Change and percent in Arizona population data</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/practice/03-excel-rates.html" class="navigation-list-link">Rates and ratios with FBI data</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/practice/05-excel-police-uof.html" class="navigation-list-link">Build your own use of force database</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/practice/07-excel-kpop.html" class="navigation-list-link">Formulas for boring Spotify playlists</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/practice/08-excel-pop-filter-sort.html" class="navigation-list-link">Population data filter & sort</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/practice/11-excel-pivot-pools.html" class="navigation-list-link">Practice with swimming pool inspections</a> </li><li class="navigation-list-item "> <a href="http://localhost:4000/excel/practice/12-excel-baseball.html" class="navigation-list-link">Pivot tables with baseball scores</a> </li></ul></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/r-stats" class="navigation-list-link">R for journalism</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/r-stats/r-intro.html" class="navigation-list-link">Starting R</a></li><li class="navigation-list-item "><a href="http://localhost:4000/r-stats/r-test-embed.html" class="navigation-list-link">Starting R</a></li></ul></li><li class="navigation-list-item active"><a href="http://localhost:4000/special" class="navigation-list-link">Special</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/special/scrape-part1.html" class="navigation-list-link">Scraping part 1</a></li><li class="navigation-list-item "><a href="http://localhost:4000/special/cleanup_pdf.html" class="navigation-list-link">PDF tools</a></li><li class="navigation-list-item "><a href="http://localhost:4000/special/cleanup_openrefine.html" class="navigation-list-link">Cleaning data with OpenRefine</a></li><li class="navigation-list-item active"><a href="http://localhost:4000/special/regex-beginning.html" class="navigation-list-link active">Intro to Regular Expressions</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/records" class="navigation-list-link">Public records</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/foia/foia-help.html" class="navigation-list-link">Getting FOIA help</a></li><li class="navigation-list-item "><a href="http://localhost:4000/foia/records-stories.html" class="navigation-list-link">FOIA stories</a></li><li class="navigation-list-item "><a href="http://localhost:4000/foia/public-records-outside-in.html" class="navigation-list-link">Public records strategy</a></li><li class="navigation-list-item "><a href="http://localhost:4000/foia/arizona-foia.html" class="navigation-list-link">Arizona public records</a></li><li class="navigation-list-item "><a href="http://localhost:4000/foia/tips.html" class="navigation-list-link">FOIA resources</a></li></ul></li><li class="navigation-list-item"><a href="http://localhost:4000/workshops" class="navigation-list-link">Workshops</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="http://localhost:4000/workshops/bootcamp.html" class="navigation-list-link">Cronkite bootcamp</a></li><li class="navigation-list-item "><a href="http://localhost:4000/workshops/cronkite-mayo.html" class="navigation-list-link">Cronkite-Mayo</a></li><li class="navigation-list-item "><a href="http://localhost:4000/workshops/newstrain/newstrain.html" class="navigation-list-link">NewsTrain Phoenix</a></li><li class="navigation-list-item "><a href="http://localhost:4000/workshops/writing.html" class="navigation-list-link">NICAR master class</a></li><li class="navigation-list-item "><a href="http://localhost:4000/workshops/phd-sources.html" class="navigation-list-link">Links to source data for doctoral students</a></li><li class="navigation-list-item "><a href="http://localhost:4000/workshops/fundamental1day.html" class="navigation-list-link">1-day CAR workshop</a></li></ul></li></ul> </nav> </div> <footer class="site-footer"> <p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p> </footer> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Data reporting @ Cronkite" aria-label="Search Data reporting @ Cronkite" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0"><a href="https://isearch.asu.edu/profile/3189494">Sarah Cohen / Knight Chair / Cronkite School</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/special">Special</a></li> <li class="breadcrumb-nav-list-item"><span>Intro to Regular Expressions</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h2 id="regular-expressions-basics"> <a href="#regular-expressions-basics" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Regular Expressions basics </h2> <p><em>Regular expressions</em> are used to find and replace text based on <em>patterns</em> rather than <em>characters</em>. They’re particularly useful when trying to pull apart and standardize variables in a database such as names, phone numbers and addresses to make grouping and joining more effective.</p> <p>A human can easily discern that the name <em>John W. Smith, Jr.</em> and <em>Smith, John W Jr</em> are probably the same. A computer sees them as completely different – they don’t start with the same characters, they have commas in different places, etc. A regular expression can help you pull apart names based on their pieces and then put them back together in another form.</p> <p>There are up to three parts to a regular expression:</p> <ol> <li>The pattern you are trying to find.</li> <li>Options that control whether the pattern should be case-sensitive and how it handles line endings and wild cards. I usually turn off case-sensitivity but leave the other options alone.</li> <li>An optional replacement, which could use part of what you’ve found in the original seeking phase.</li> </ol> <p>In practice, you’ll usually save the pieces of each pattern you’ve found into a variable, then put them back together differently.</p> <p><a href="/assets/docs/meyer_regex.pdf">Justin Meyer had a good handout</a> at a recent IRE conference that can serve as a guide.</p> <p>If you’re using R, you can use a regex using the stringr package (part of the tidyverse) using the functions <em>str_detect</em> , <em>str_extract</em> and their cousins. They look like this:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>str_detect(var_name, regex("pattern"))  
</code></pre></div></div> <ol id="markdown-toc"> <li><a href="#regular-expressions-basics" id="markdown-toc-regular-expressions-basics">Regular Expressions basics</a> <ol> <li><a href="#pattern-basics" id="markdown-toc-pattern-basics">Pattern basics</a> <ol> <li><a href="#literal-strings" id="markdown-toc-literal-strings">Literal strings</a></li> <li><a href="#wild-cards" id="markdown-toc-wild-cards">Wild cards</a></li> <li><a href="#character-classes" id="markdown-toc-character-classes">Character classes</a></li> <li><a href="#escaping" id="markdown-toc-escaping">Escaping</a></li> </ol> </li> </ol> </li> <li><a href="#sample-data" id="markdown-toc-sample-data">Sample data</a></li> <li><a href="#a-simple-example" id="markdown-toc-a-simple-example">A simple example</a> <ol> <li><a href="#looking-for-specific-words-or-characters" id="markdown-toc-looking-for-specific-words-or-characters">Looking for specific words or characters</a></li> </ol> </li> <li><a href="#practice-1-extract-date-parts" id="markdown-toc-practice-1-extract-date-parts">Practice #1: Extract date parts</a></li> <li><a href="#practice-2-extract-pieces-of-phone-numbers" id="markdown-toc-practice-2-extract-pieces-of-phone-numbers">Practice #2: Extract pieces of phone numbers</a></li> <li><a href="#practice-3-extract-address-pieces" id="markdown-toc-practice-3-extract-address-pieces">Practice #3: Extract address pieces</a></li> <li><a href="#on-your-own" id="markdown-toc-on-your-own">On your own</a></li> </ol> <h3 id="pattern-basics"> <a href="#pattern-basics" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Pattern basics </h3> <p>While each language implements regular expressions (or “regex”) a little differently, they are generally the same. You may need to look up how to reference these pieces in your language.</p> <h4 id="literal-strings"> <a href="#literal-strings" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Literal strings </h4> <p>These are just letters, like “abc” or “Mary”. They are case-sensitive and no different than using text in a filter.</p> <p>You can tell the regex that you want to find your pattern at the beginning or end of a line:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>^   = "Find only at the beginning of a line"
$   = "Find only at the end of a line"
</code></pre></div></div> <h4 id="wild-cards"> <a href="#wild-cards" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Wild cards </h4> <p>A wild card is a character you use to indicate the word “anything”. Here are some ways to use wild cards in regex:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  .      = "any single character of any type"
  .?     = "a possible single character of any type (but it might not exist)"
  .*     = "anything or nothing of any length"
  .+     = "anything one or more times"
  .{1,3} = "anything running between 1 and 3 characters long"
</code></pre></div></div> <p>Regular expressions also have wild cards of specific types. Usually, they are commonly used like this:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  \d   = "Any digit"
  \w   = "Any word character"
  \s   = "Any whitespace (tab, space, etc.)"
  \b   = "Any word boundary" (period, comma, space, etc.)
</code></pre></div></div> <p>When you upper-case them, it’s the opposite:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  \D = "Anything but a digit"
</code></pre></div></div> <h4 id="character-classes"> <a href="#character-classes" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Character classes </h4> <p>Sometimes you want to tell the regex what characters it is allowed to accept. For example, say you don’t know whether there is an alternative spelling for a name – you can tell the regex to either ignore a character, or take one of several.</p> <p>In R, we saw that there were alternative spellings for words like “summarize” – the British and the American spellings. You could, for example, use this pattern to pick up either spelling:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    summari[sz]e
</code></pre></div></div> <p>The bracket tells the regex that it’s allowed to take either one of those characters. You can also use ranges:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  [a-zA-Z0-9]
</code></pre></div></div> <p>means that any lower case, upper case or numeric character is allowed.</p> <h4 id="escaping"> <a href="#escaping" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Escaping </h4> <p>Because they’re already being used for special purposes, some characters have to be “escaped” before you can search for them. Notably, they are parentheses (), periods, backslashes, dollar signs, question marks, dashes and carets.</p> <p>This means that to find a period or question mark, you have to use the pattern</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    \. or
    \?
</code></pre></div></div> <p>In the Regex101, this is the biggest difference among the flavors of regex – Python generally requires the least amount of escaping.</p> <h2 id="sample-data"> <a href="#sample-data" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Sample data </h2> <p>Here are three small text files that you can copy and paste from your browser into the <a href="https://regex101.com/">regex101.com</a> site. It’s a site that lets you test out regular expressions, while explaining to you what’s happening with them.</p> <ol> <li>A <a href="/assets/data/special/regex_phones.txt">list of phone numbers</a> in different formats</li> <li>A <a href="/assets/data/special/regex_dates.txt">list of dates</a> that you need to convert into a different form.</li> <li>A <a href="/assets/data/special/regex_addresses.txt">list of addresses</a> that are in multiple lines, and you need to pull out the pieces. (Courtesy of IRE)</li> <li>A <a href="/assets/data/special/regex_h2bvisas.txt">small chunk of the H2B visa applications</a> from Arizona companies or worksites that has been kind of messed up for this demonstration, in tab-delimited format.</li> </ol> <h2 id="a-simple-example"> <a href="#a-simple-example" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> A simple example </h2> <p>You should try following along in <a href="https://regex101.com">regex 101</a> for this part.</p> <h3 id="looking-for-specific-words-or-characters"> <a href="#looking-for-specific-words-or-characters" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Looking for specific words or characters </h3> <p>The easiest regex is one that has just the characters you’re looking for when you know that they are the right case. They’re called <em>literals</em> because you are literally looking for those letters or characters.</p> <p><img src="../assets/images/41-regex1.png" alt="" /></p> <p>If you weren’t sure if it was upper or lower case, you could change the global pattern flags (to the right of the pattern) from “gm” to “gmi”, which includes the instruction to IGNORECASE.</p> <h2 id="practice-1-extract-date-parts"> <a href="#practice-1-extract-date-parts" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Practice #1: Extract date parts </h2> <p>(In Regex 101, change the “Flavor” to “Python” – otherwise, you have to escape more of the characters.)</p> <p>We want to turn dates that look like this:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  1/24/2018
</code></pre></div></div> <p>into something that looks like this:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 2008-1-24
</code></pre></div></div> <p>Copy and paste these numbers into the regex 101 window:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>9/7/2017
9/11/1998
9/11/2017
9/19/2018
9/15/2017
10/13/2019
11/3/2017
</code></pre></div></div> <p>First, you can use any digit using the pattern “\d”. Try to do it in pieces. First, see if you can find one or two digits at the beginning of the line.</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ^\d{1,2}
</code></pre></div></div> <p>Try coming up with the rest of it on your own before you type in the answer:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  ^\d{1,2}.\d{1,2}.\d{4}
</code></pre></div></div> <p>(This works because regular expressions normally are “greedy”. That is, if you tell it “one or two digits”, it will always take two if they exist.)</p> <p>Put parentheses around any pieces that you want to use for later:</p> <p><img src="/assets/images/41-regex4.png" alt="" /></p> <p>Now each piece has its section, numbered 0 for the whole match, and then 1-3 for the pieces.</p> <p><img src="../assets/images/41-regex3.png" alt="" /></p> <h2 id="practice-2-extract-pieces-of-phone-numbers"> <a href="#practice-2-extract-pieces-of-phone-numbers" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Practice #2: Extract pieces of phone numbers </h2> <p>Here are some phone numbers in different formats:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>623-374-1167
760.352.5212
831-676-3833
(831)-676-3833
623-374-1167 ext 203
831-775-0370
(602)-955-0222  x20
928-627-8080
831-784-1453
</code></pre></div></div> <p>This is a little more complicated than it looks, so try piecing together what this one says:</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  (\d{3})[-.\)]+(\d{3})[-.]+(\d{4})
</code></pre></div></div> <p>(This won’t work in the “substitute” area – it would be easier to create a new variable with the results than to replace the originals.)</p> <p>Anything within parentheses will be “captured” in a block.</p> <h2 id="practice-3-extract-address-pieces"> <a href="#practice-3-extract-address-pieces" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> Practice #3: Extract address pieces </h2> <p>(This comes from “Regular expressions for the rest of us”, from Christian McDonald of University of Texas, from the 2019 NICAR conference. <a href="/assets/docs/regex_for_rest_of_us.pdf">This exercise is a great primer on regular expression</a>.)</p> <p>Here are a few lines of the data, which you can copy and paste to go through McDonald’s exercise. (He uses the Javascript version of regular expressions, but for our purposes in this exercise, it doesn’t matter which one you use. If you choose Python, you’ll have one extra step, of putting a slash (\) before the quotes. The colors work a little better if you leave it on the default PHP method.)</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"10111 N LAMAR BLVD
AUSTIN, TX 78753
(30.370945933000485, -97.6925542359997)"
"3636 N FM 620 RD
AUSTIN, TX 78734
(30.377873241000486, -97.9523496219997)"
"9919 SERVICE AVE
AUSTIN, TX 78743
(30.205028616000448, -97.6625588019997)"
"10601 N LAMAR BLVD
AUSTIN, TX 78753
(30.37476574700048, -97.6903937089997)"
"801 E WILLIAM CANNON DR Unit 205
AUSTIN, TX 78745
(30.190914575000477, -97.77193838799968)"
"4408 LONG CHAMP DR
AUSTIN, TX 78746
(30.340981111000474, -97.7983147919997)"
"625 W BEN WHITE BLVD EB
AUSTIN, TX 78745
(30.206884239000487, -97.7956469989997)"
"3914 N LAMAR BLVD
AUSTIN, TX 78756
(30.307477098000447, -97.74169675199965)"
"15201 FALCON HEAD BLVD
BEE CAVE, TX 78738
(30.32068282700044, -97.96890311999965)"
"11905 FM 2244 RD Unit 100
BEE CAVE, TX 78738
(30.308363203000454, -97.92393357799966)"
"3801 JUNIPER TRCE
BEE CAVE, TX 78738
(30.308247975000484, -97.93511531999968)"
"12800 GALLERIA CIR Unit 101
BEE CAVE, TX 78738
(30.307996778000472, -97.94065088199966)"
"12400 W SH 71 Unit 510
BEE CAVE, TX 78733
(30.330682136000462, -97.86979886299969)"
"716 W 6TH ST
AUSTIN, TX 78701
(30.27019732500048, -97.75036306299967)"
"3003 BEE CAVES RD
ROLLINGWOOD, TX 78746
(30.271592738000436, -97.79583786499967)"
</code></pre></div></div> <h2 id="on-your-own"> <a href="#on-your-own" class="anchor-heading"><svg class="d-inline-block v-align-middle" viewBox="0 0 16 16" version="1.1" width="18" height="18" aria-hidden="true"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a> On your own </h2> <p><a href="/assets/data/special/regex_h2bvisas.txt">This is a small list of H2A visa applications</a>, which are requests for agricultural and seasonal workers, from companies or worksites in Arizona. Try importing it into Excel, then copying some of the cells to practice your regular expression skills.</p> <p>You might try:</p> <ul> <li>Finding all of the LLC’s in the list (limited liability companies) of names. (You should turn on the case-insensitive flag in Regex 101 or set that flag in your program if you do.)</li> <li>See how far you can get in standardizing the addresses.</li> <li>Split the city, state and zip code of the worksite.</li> <li>Find all of the jobs related to field crops such as lettuce or celery.</li> </ul> </div> </div> </div> </div> </body> </html>
